<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ocorr√™ncias - EyesEverywhere</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>

  <nav class="navbar">
    <div class="container">
      <h1 class="logo">EyesEverywhere</h1>
      <ul class="nav-links">
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="about.html">Sobre N√≥s</a></li>
        <li><a href="ocorrencias.html" class="active">Ocorr√™ncias</a></li>
        <li><a href="contacto.html">Contacto</a></li>
      </ul>
    </div>
  </nav>

  <header class="header-pequeno">
    <div class="header-content">
      <h1>Ocorr√™ncias</h1>
      <p>In√≠cio > Ocorr√™ncias</p>
    </div>
  </header>

  <section class="section">

    <div class="intro-ocorrencias">
      <p>
        Consulta aqui as ocorr√™ncias j√° registadas, bem como os tipos de interven√ß√µes que realizamos para preservar o
        patrim√≥nio. Tamb√©m podes registar novas ocorr√™ncias, contribuindo ativamente para a conserva√ß√£o dos espa√ßos
        monitorizados.
      </p>
    </div>

    <div class="tabs">
      <button class="tab active" onclick="mostrarSecao('adecorrer')">A Decorrer</button>
      <button class="tab" onclick="mostrarSecao('concluido')">Conclu√≠do</button>
      <button class="tab" onclick="mostrarSecao('novo')">Registar</button>
    </div>

    <div id="adecorrer" class="secao-ocorrencia ativa">
      <div class="bloco-ocorrencias">
        <div class="barra-pesquisa-wrapper">
          <input type="text" placeholder="Pesquisar por local ou refer√™ncia..." class="barra-pesquisa">
          <button class="botao-pesquisar-interna">üîç</button>
        </div>
        <div class="lista-ocorrencias"></div>
      </div>
    </div>

    <div id="concluido" class="secao-ocorrencia" style="display: none;">
      <div class="bloco-ocorrencias">
        <div class="barra-pesquisa-wrapper">
          <input type="text" placeholder="Pesquisar por local ou refer√™ncia..." class="barra-pesquisa">
          <button class="botao-pesquisar-interna">üîç</button>
        </div>
        <div class="lista-ocorrencias"></div>
      </div>
    </div>

    <div id="novo" class="secao-ocorrencia" style="display: none;">
      <form class="formulario-ocorrencia">
        <div class="dupla">
          <input type="date" name="data" placeholder="Data" required>
          <input type="text" name="localizacao" placeholder="Localiza√ß√£o" required>
        </div>

        <select name="tipo" required>
          <option value="">Tipo de ocorr√™ncia</option>
          <option value="estrutura">Estrutura danificada</option>
          <option value="sinalizacao">Problema de sinaliza√ß√£o</option>
          <option value="limpeza">Necessidade de limpeza</option>
        </select>

        <textarea name="descricao" rows="4" placeholder="Descri√ß√£o detalhada" required></textarea>

        <div class="anexo">
          <input type="file" name="ficheiro">
          <button type="button" disabled>Anexar</button>
        </div>

        <div class="submit">
          <button type="submit">Enviar Ocorr√™ncia</button>
        </div>
      </form>
    </div>

  </section>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-col">
        <h4>EyesEverywhere</h4>
        <p>Rua da Cultura, 125<br>4800-123 Guimar√£es, Portugal</p>
        <p><strong>Telefone:</strong> +351 253 123 456</p>
        <p><strong>Email:</strong> contacto@eyeseverywhere.pt</p>
      </div>

      <div class="footer-col">
        <h4>Links √öteis</h4>
        <ul>
          <li><a href="index.html">P√°gina Inicial</a></li>
          <li><a href="about.html">Sobre n√≥s</a></li>
          <li><a href="#">Auditorias</a></li>
          <li><a href="ocorrencias.html">Ocorr√™ncias</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>Os nossos servi√ßos</h4>
        <ul>
          <li>Monitoriza√ß√£o de Monumentos</li>
          <li>Auditoria de Trilhos Naturais</li>
          <li>Geocaching Sustent√°vel</li>
          <li>Relat√≥rios P√∫blicos</li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>¬© 2025 EyesEverywhere</h4>
        <p>Desenvolvido por EyesEverywhere Team</p>
        <div class="footer-socials">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>¬© Copyright <strong>Moderna</strong> All Rights Reserved</p>
      <p>Designed by <a href="#">BootstrapMade</a></p>
    </div>
  </footer>

  <script>
    function mostrarSecao(id) {
      const secoes = document.querySelectorAll('.secao-ocorrencia');
      secoes.forEach(secao => secao.style.display = 'none');
      document.getElementById(id).style.display = 'block';

      const tabs = document.querySelectorAll('.tab');
      tabs.forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
    }

    function carregarOcorrencias() {
      const aDecorrerContainer = document.querySelector('#adecorrer .lista-ocorrencias');
      const concluidoContainer = document.querySelector('#concluido .lista-ocorrencias');

      aDecorrerContainer.innerHTML = '';
      concluidoContainer.innerHTML = '';

      const ocorrenciasA = JSON.parse(localStorage.getItem('auditoriasADECORRER') || '[]');
      const ocorrenciasC = JSON.parse(localStorage.getItem('auditoriasConcluidas') || '[]');

      ocorrenciasA.forEach(item => {
        const card = document.createElement('div');
        card.className = 'ocorrencia-card a-decorrer';
        card.innerHTML = `
          <div class="info-topo">
            <p><strong>#${item.id}</strong> ‚Äì ${item.local}</p>
            <span class="data-ocorrencia">${item.data}</span>
          </div>
          <p>${item.descricao}</p>
        `;
        aDecorrerContainer.appendChild(card);
      });

      ocorrenciasC.forEach(item => {
        const card = document.createElement('div');
        card.className = 'ocorrencia-card concluido';
        card.innerHTML = `
          <div class="info-topo">
            <p><strong>#${item.id}</strong> ‚Äì ${item.local}</p>
            <span class="data-ocorrencia">${item.data}</span>
          </div>
          <p>${item.descricao}</p>
        `;
        concluidoContainer.appendChild(card);
      });
    }

    document.addEventListener('DOMContentLoaded', carregarOcorrencias);
  </script>

  <script type="module" src="storage-service.js"></script>
  <script type="module" src="front-office.js"></script>
</body>

</html>
